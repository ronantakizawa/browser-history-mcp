PS C:\Users\r_takizawa\search-history-mcp> python3 .\test_fix.py
================================================================================
TESTING DUCKDUCKGO PATH FIX
================================================================================

[STEP 1] Finding DuckDuckGo path...
✅ Found path: C:\Users\r_takizawa\AppData\Local\Packages\DuckDuckGo.DesktopBrowser_ya2fgkz3nks94\LocalState\EBWebView\Default\History
✅ Correct path (not internal environment)
✅ File exists
   Size: 204,800 bytes

[STEP 2] Testing query...
❌ Error querying database: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\R_TAKI~1\\AppData\\Local\\Temp\\tmp2apskym9.db'
Traceback (most recent call last):
  File "C:\Users\r_takizawa\search-history-mcp\mcp_server.py", line 319, in query_history_db
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
sqlite3.ProgrammingError: Incorrect number of bindings supplied. The current statement uses 0, and there are 1 supplied.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\r_takizawa\search-history-mcp\test_fix.py", line 43, in <module>
    results = query_history_db(query, (5,), "duckduckgo")
  File "C:\Users\r_takizawa\search-history-mcp\mcp_server.py", line 327, in query_history_db
    os.unlink(tmp_path)
    ~~~~~~~~~^^^^^^^^^^
PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\R_TAKI~1\\AppData\\Local\\Temp\\tmp2apskym9.db'